# CEX Arbitrage Engine Configuration
# YAML-based configuration for multi-exchange cryptocurrency trading

# Environment settings
environment:
  name: dev  # dev, prod, test
  debug: true
  log_level: DEBUG  # CRITICAL, ERROR, WARNING, INFO, DEBUG

# MEXC Exchange API settings
mexc:
  api_key: ""  # Your MEXC API key
  secret_key: ""  # Your MEXC secret key
  base_url: "https://api.mexc.com"
  websocket_url: "wss://wbs-api.mexc.com/ws"

# Gate.io Exchange API settings
gateio:
  api_key: ""  # Your Gate.io API key (empty for public-only access)
  secret_key: ""  # Your Gate.io secret key (empty for public-only access)
  base_url: "https://api.gateio.ws/api/v4"  # Production URL
  websocket_url: "wss://api.gateio.ws/ws/v4/"  # Production WebSocket URL
  testnet_base_url: "https://api-testnet.gateapi.io/api/v4"  # Testnet URL
  testnet_websocket_url: "wss://ws-testnet.gate.com/v4/ws/spot"  # Testnet WebSocket URL

# Network configuration
network:
  request_timeout: 10.0  # seconds
  connect_timeout: 5.0   # seconds
  max_retries: 3
  retry_delay: 1.0       # seconds

# Rate limiting
rate_limiting:
  mexc_requests_per_second: 18  # Conservative limit for MEXC
  gateio_requests_per_second: 15  # Conservative limit for Gate.io (200/10s = 20, but use 15)

# WebSocket settings
websocket:
  connect_timeout: 10.0      # seconds
  heartbeat_interval: 30.0   # seconds
  max_reconnect_attempts: 10
  reconnect_delay: 5.0       # seconds

# HFT Arbitrage Engine Configuration
arbitrage:
  # Engine settings
  engine_name: "hft_arbitrage_main"
  enabled_opportunity_types:
    - "SPOT_SPOT"
    - "SPOT_FUTURES_HEDGE"
  enabled_exchanges:
    - "MEXC"
    - "GATEIO"

  # Performance settings (HFT targets)
  target_execution_time_ms: 30      # Target <50ms for HFT compliance
  opportunity_scan_interval_ms: 100  # Scan every 100ms
  position_monitor_interval_ms: 1000 # Monitor positions every 1s
  balance_refresh_interval_ms: 5000  # Refresh balances every 5s
  market_data_staleness_ms: 100     # Max 100ms data age for HFT

  # Risk management limits
  risk_limits:
    max_position_size_usd: 5000.0      # Maximum single position size
    max_total_exposure_usd: 25000.0    # Maximum total exposure across all positions
    max_exchange_exposure_usd: 15000.0 # Maximum exposure per exchange
    max_symbol_exposure_usd: 10000.0   # Maximum exposure per trading pair
    max_daily_loss_usd: 2500.0         # Maximum daily loss threshold
    max_single_loss_usd: 500.0         # Maximum loss per single arbitrage
    min_profit_margin_bps: 50          # Minimum 0.5% profit margin
    stop_loss_threshold_bps: 200       # 2% stop loss threshold
    max_execution_time_ms: 45000       # Maximum 45 second execution time
    max_slippage_bps: 25               # Maximum 0.25% slippage
    max_partial_fill_ratio: 0.1        # Maximum 10% partial fill ratio
    max_concurrent_operations: 3       # Maximum concurrent arbitrage operations
    max_price_deviation_bps: 100       # Maximum 1% price deviation from fair value
    min_market_depth_usd: 50000.0      # Minimum $50k order book depth required
    max_spread_bps: 500                # Maximum 5% bid-ask spread tolerance
    volatility_circuit_breaker_bps: 1000 # 10% volatility circuit breaker
    max_recovery_attempts: 3           # Maximum position recovery attempts
    recovery_timeout_seconds: 300      # 5 minute recovery timeout
    emergency_close_threshold_bps: 500 # 5% emergency position close threshold

  # Safety features
  enable_risk_checks: true          # Enable real-time risk validation
  enable_circuit_breakers: true     # Enable automated circuit breakers
  enable_websocket_feeds: true      # Use WebSocket for real-time data
  websocket_fallback_to_rest: true  # Fallback to REST if WebSocket fails
  enable_dry_run: true              # DRY RUN MODE: Default enabled for safety
  enable_detailed_logging: true     # Comprehensive operation logging
  enable_performance_metrics: true  # Detailed performance tracking
  enable_recovery_mode: true        # Automatic position recovery

  # Exchange-specific configurations
  exchange_configs:
    MEXC:
      # MEXC-specific settings can be added here
      priority: 1  # Exchange priority for execution
    GATEIO:
      # Gate.io-specific settings can be added here
      priority: 2  # Exchange priority for execution

  # Arbitrage pairs configuration (simplified)
  # Symbol details are auto-discovered from exchanges using get_exchange_info()
  arbitrage_pairs:
    - id: "wai_usdt_spot_arb"
      base_asset: "WAI"
      quote_asset: "USDT"
      opportunity_type: "SPOT_SPOT"  # Cross-exchange spot arbitrage
      min_profit_bps: 30  # Minimum 0.30% profit to execute
      max_exposure_usd: 25000  # Maximum $25k exposure for this pair
      is_enabled: true
      priority: 1  # Highest priority
    - id: "hifi_usdt_spot_arb"
      base_asset: "HIFI"
      quote_asset: "USDT"
      opportunity_type: "SPOT_SPOT"
      min_profit_bps: 25  # Minimum 0.25% profit
      max_exposure_usd: 20000  # Maximum $20k exposure
      is_enabled: true
      priority: 2
    - id: "giga_usdt_spot_arb"
      base_asset: "GIGA"
      quote_asset: "USDT"
      opportunity_type: "SPOT_SPOT"
      min_profit_bps: 35  # Higher threshold for less liquid pair
      max_exposure_usd: 15000
      is_enabled: true
      priority: 3
    - id: "aiot_usdt_spot_arb"
      base_asset: "AIOT"
      quote_asset: "USDT"
      opportunity_type: "SPOT_SPOT"
      min_profit_bps: 40  # Higher for volatile asset
      max_exposure_usd: 10000
      is_enabled: false  # Disabled by default
      priority: 4
    # Additional pairs can be added - symbol info auto-discovered
    - id: "neiroeth_usdt_spot_arb"
      base_asset: "NEIROETH"
      quote_asset: "USDT"
      min_profit_bps: 45
      max_exposure_usd: 8000
      is_enabled: true
      priority: 5
    - id: "hippo_usdt_spot_arb"
      base_asset: "HIPPO"
      quote_asset: "USDT"
      min_profit_bps: 50
      max_exposure_usd: 7000
      is_enabled: true
      priority: 6
    - id: "myria_usdt_spot_arb"
      base_asset: "MYRIA"
      quote_asset: "USDT"
      min_profit_bps: 50
      max_exposure_usd: 7000
      is_enabled: true
      priority: 6
    - id: "myx_usdt_spot_arb"
      base_asset: "MYX"
      quote_asset: "USDT"
      min_profit_bps: 50
      max_exposure_usd: 7000
      is_enabled: true
      priority: 6
    - id: "tai_usdt_spot_arb"
      base_asset: "TAI"
      quote_asset: "USDT"
      min_profit_bps: 50
      max_exposure_usd: 7000
      is_enabled: true
      priority: 6
    - id: "ai16z_usdt_spot_arb"
      base_asset: "AI16Z"
      quote_asset: "USDT"
      min_profit_bps: 50
      max_exposure_usd: 7000
      is_enabled: true
      priority: 6
    - id: "badger_usdt_spot_arb"
      base_asset: "BADGER"
      quote_asset: "USDT"
      min_profit_bps: 50
      max_exposure_usd: 7000
      is_enabled: true
      priority: 6