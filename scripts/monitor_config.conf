# =============================================================================
# Space Monitoring Configuration for CEX Arbitrage System
# =============================================================================

# Alert thresholds
DISK_WARNING_THRESHOLD=80      # Warning at 80% disk usage
DISK_CRITICAL_THRESHOLD=90     # Critical at 90% disk usage
DB_WARNING_THRESHOLD_GB=6      # Warning at 6GB database size
DB_CRITICAL_THRESHOLD_GB=8     # Critical at 8GB database size
DOCKER_WARNING_THRESHOLD_GB=8  # Warning at 8GB Docker usage
DOCKER_CRITICAL_THRESHOLD_GB=12 # Critical at 12GB Docker usage

# Monitoring intervals (seconds)
MONITOR_INTERVAL=300           # Health check every 5 minutes
ALERT_COOLDOWN=1800           # 30 minutes between duplicate alerts
DASHBOARD_REFRESH=10          # Dashboard refresh every 10 seconds

# Database connection
DB_HOST="localhost"
DB_PORT="5432"
DB_NAME="arbitrage_data"
DB_USER="arbitrage_user"
DB_PASSWORD=""  # Set this or use environment variable

# Alert destinations (leave empty to disable)
ALERT_EMAIL=""                 # Email for alerts
SLACK_WEBHOOK=""              # Slack webhook URL
TELEGRAM_BOT_TOKEN=""         # Telegram bot token
TELEGRAM_CHAT_ID=""           # Telegram chat ID

# Data retention
METRICS_RETENTION_DAYS=30     # Keep metrics for 30 days
LOG_RETENTION_DAYS=7          # Keep logs for 7 days
ALERT_RETENTION_DAYS=14       # Keep alerts for 14 days

# Performance settings
METRICS_COMPRESSION=true      # Compress old metrics
PARALLEL_CHECKS=true          # Run multiple checks in parallel
MAX_CHECK_TIMEOUT=30          # Timeout for individual checks (seconds)

# Emergency settings
AUTO_MAINTENANCE_ON_CRITICAL=true  # Trigger maintenance on critical alerts
EMERGENCY_CLEANUP_THRESHOLD=95     # Trigger emergency cleanup at 95% disk
MAINTENANCE_SCRIPT_PATH="${SCRIPT_DIR}/automated_maintenance.sh"

# Notification settings
ALERT_INCLUDE_SYSTEM_INFO=true    # Include system info in alerts
ALERT_INCLUDE_RECOMMENDATIONS=true # Include recommendations in alerts
ALERT_FORMAT="markdown"           # Format: markdown, html, text

# Advanced monitoring
MONITOR_TABLE_SIZES=true          # Monitor individual table sizes
MONITOR_CHUNK_DISTRIBUTION=true   # Monitor TimescaleDB chunk distribution
MONITOR_CONNECTION_COUNT=true     # Monitor database connections
MONITOR_DOCKER_CONTAINERS=true    # Monitor individual containers

# Webhook URLs for different alert levels
WARNING_WEBHOOK=""                # Different webhook for warnings
CRITICAL_WEBHOOK=""               # Different webhook for critical alerts

# Custom thresholds per service
POSTGRES_MEMORY_THRESHOLD_MB=1500 # PostgreSQL memory warning threshold
COLLECTOR_MEMORY_THRESHOLD_MB=400 # Data collector memory warning
GRAFANA_MEMORY_THRESHOLD_MB=200   # Grafana memory warning

# Health check endpoints
HEALTH_CHECK_ENABLED=true         # Enable health check endpoints
HEALTH_CHECK_PORT=8080            # Port for health check HTTP endpoint
HEALTH_CHECK_PATH="/health"       # Path for health check endpoint